<% if @group %>
  <% breadcrumb :tournament_players_in_group, @tournament, @group %>
<% else %>
  <% breadcrumb :tournament_players, @tournament %>
<% end %>

<% content_for :page_title do %>
Tournament <%= link_to(@tournament.name, admin_tournament_path(@tournament)) %>
  <% if @group %>
  - <%= link_to @group.name, group_show_admin_tournaments_path(@tournament, @group) %>
  <% end %>
<% end %>

<div class="row">
  <div class="col-sm-2">
    <div class="card">
      <%= button_to new_admin_tournaments_players_path(@tournament), form_class: "form-horizontal",
          method: :get, class: "btn btn-block btn-primary btn-lg float-right" do %>
        <i class="fas fa-plus"></i><span> Add Player</span>
      <% end %>
    </div>
  </div>
  <div class="col-sm-2">
    <div class="card">
      <%= button_to upload_admin_tournaments_players_path(@tournament), form_class: "form-horizontal",
          method: :get, class: "btn btn-block btn-primary btn-lg float-right" do %>
        <i class="fas fa-upload"></i><span> Upload Players</span>
      <% end %>
    </div>
  </div>
</div>

<div class="row">
<div class="col-md-8">
<div class="card card-primary card-outline">
<div class="card-body table-responsive p-2">
  <table id="datatable_with_search" class="table table-bordered table-hover text-nowrap">
    <thead>
      <tr>
        <th style="width: 1%">#</th>
        <th>Name</th>
        <th>Rating</th>
        <th>Group</th>
        <th style="text-align:center; width: 20%">Categories</th>
        <th style="text-align:center; width: 8%">Points</th>
        <th style="width: 10%"></th>
      </tr>
    </thead>

    <tbody>
      <% @tournaments_players.each_with_index do |player,idx| %>
        <tr>
          <td style="vertical-align: middle;" class="text-right"><%= idx + 1 %></td>
          <td style="vertical-align: middle;"><%= link_to(player.name, admin_tournaments_player_path(player)) %> <%= blacklisted_icon(player) %></td>
          <td style="vertical-align: middle;" class="text-center"><%= player.rating %></td>
          <td style="vertical-align: middle;" class="text-center"><%= render 'edit_link', player: player %></td>
          <td style="vertical-align: middle;" class="text-center"><%= player.labels.sort.join(",") %></td>
          <td style="vertical-align: middle;" class="text-center"><%= player.points %></td>

          <td class="project-actions text-center">
            <%= link_to admin_tournaments_player_path(player), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger btn-sm" do %>
              <i class="fas fa-trash"></i> Delete
            <% end %>
          </td>

      </tr>
    <% end %>
  </tbody>
</table>
</div>
</div>
</div>
</div>
